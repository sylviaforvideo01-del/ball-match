<!DOCTYPE html>
<html lang="zh-CN">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<title>ÁêÉÁêÉÊ∂àÊ∂à‰πê - Ball Match v1.4</title>
<style>
* { margin: 0; padding: 0; box-sizing: border-box; -webkit-tap-highlight-color: transparent; user-select: none; }
body { font-family: 'Microsoft YaHei', sans-serif; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); min-height: 100vh; overflow: hidden; touch-action: none; }
#gameContainer { width: 100%; height: 100vh; display: flex; flex-direction: column; position: relative; }
#topBar { display: flex; justify-content: space-between; align-items: center; padding: 10px 15px; background: rgba(255,255,255,0.15); backdrop-filter: blur(10px); flex-shrink: 0; }
#levelInfo { color: white; font-size: clamp(14px, 4vw, 18px); font-weight: bold; }
#scoreInfo { color: #FFD700; font-size: clamp(12px, 3.5vw, 16px); }
#gameArea { flex: 1; position: relative; overflow: hidden; display: flex; align-items: center; justify-content: center; }
#board { position: relative; width: 100%; height: 100%; }
.ball { position: absolute; border-radius: 50%; cursor: pointer; transition: all 0.2s cubic-bezier(0.68, -0.55, 0.265, 1.55); display: flex; align-items: center; justify-content: center; font-size: clamp(14px, 3.5vw, 20px); box-shadow: inset -3px -3px 8px rgba(255,255,255,0.9), inset 3px 3px 8px rgba(255,255,255,0.5), inset 2px 2px 6px rgba(0,0,0,0.15), 0 6px 12px rgba(0,0,0,0.4), 0 2px 4px rgba(0,0,0,0.3); }
.ball::before { content: ''; position: absolute; top: 8%; left: 15%; width: 28%; height: 20%; background: radial-gradient(ellipse at center, rgba(255,255,255,0.95) 0%, rgba(255,255,255,0.5) 50%, transparent 70%); border-radius: 50%; transform: rotate(-25deg); }
.ball::after { content: ''; position: absolute; bottom: 12%; right: 18%; width: 18%; height: 12%; background: radial-gradient(ellipse at center, rgba(255,255,255,0.6) 0%, transparent 70%); border-radius: 50%; }
.ball.clickable { animation: float 2s ease-in-out infinite; }
.ball.clickable:hover { transform: scale(1.08); filter: brightness(1.15); }
.ball.blocked { opacity: 0.85; filter: brightness(0.7); cursor: not-allowed; }
.ball.blocked::after { content: 'üîí'; position: absolute; font-size: 12px; bottom: 5%; right: 5%; opacity: 0.7; }
.ball.selected { animation: bounce 0.5s ease-in-out infinite; box-shadow: inset -3px -3px 8px rgba(255,255,255,0.95), inset 3px 3px 8px rgba(255,255,255,0.6), 0 0 25px rgba(255,255,255,0.7), 0 0 0 4px rgba(255,255,255,0.5); }
.ball.hint { animation: hintPulse 1s ease-in-out infinite; box-shadow: 0 0 20px #FFD700, 0 0 40px #FFD700; }
.ball.removing { animation: popOut 0.3s ease-out forwards; }
@keyframes float { 0%, 100% { transform: translateY(0); } 50% { transform: translateY(-3px); } }
@keyframes bounce { 0%, 100% { transform: scale(1.05) translateY(0); } 50% { transform: scale(1.1) translateY(-5px); } }
@keyframes popOut { 0% { transform: scale(1); opacity: 1; } 50% { transform: scale(1.25); opacity: 0.9; } 100% { transform: scale(0); opacity: 0; } }
@keyframes hintPulse { 0%, 100% { box-shadow: 0 0 20px #FFD700; } 50% { box-shadow: 0 0 40px #FFD700, 0 0 60px #FFD700; } }
#slotArea { height: clamp(65px, 11vh, 85px); background: rgba(0,0,0,0.3); display: flex; align-items: center; justify-content: center; padding: 8px; gap: clamp(3px, 1vw, 8px); position: relative; flex-shrink: 0; }
#slotLabel { position: absolute; left: 10px; color: rgba(255,255,255,0.7); font-size: clamp(9px, 2.5vw, 11px); }
.slot { border-radius: 50%; background: rgba(255,255,255,0.1); border: 2px dashed rgba(255,255,255,0.3); display: flex; align-items: center; justify-content: center; transition: all 0.2s; flex-shrink: 0; }
.slot.filled { border: none; background: transparent; }
#toolsArea { position: absolute; bottom: clamp(75px, 13vh, 100px); left: 50%; transform: translateX(-50%); display: flex; gap: clamp(8px, 2.5vw, 16px); z-index: 100; background: rgba(0,0,0,0.2); padding: 8px 15px; border-radius: 50px; }
.toolWrapper { display: flex; flex-direction: column; align-items: center; gap: 4px; }
.toolBtn { width: clamp(44px, 10vw, 56px); height: clamp(44px, 10vw, 56px); border-radius: 50%; border: none; background: linear-gradient(145deg, #FFD700, #FFA500); color: white; font-size: clamp(16px, 4vw, 22px); cursor: pointer; box-shadow: 0 4px 12px rgba(255, 165, 0, 0.4); transition: all 0.2s; display: flex; align-items: center; justify-content: center; position: relative; }
.toolBtn:hover { transform: scale(1.1); box-shadow: 0 6px 18px rgba(255, 165, 0, 0.6); }
.toolBtn:disabled { opacity: 0.4; cursor: not-allowed; transform: none; }
.toolCount { position: absolute; top: -4px; right: -4px; background: #ff4444; color: white; width: clamp(16px, 4vw, 22px); height: clamp(16px, 4vw, 22px); border-radius: 50%; font-size: clamp(9px, 2.5vw, 12px); display: flex; align-items: center; justify-content: center; font-weight: bold; }
.toolLabel { color: rgba(255,255,255,0.9); font-size: clamp(9px, 2.5vw, 11px); white-space: nowrap; }
.modal { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.8); display: flex; align-items: center; justify-content: center; z-index: 1000; opacity: 0; visibility: hidden; transition: all 0.3s; }
.modal.show { opacity: 1; visibility: visible; }
.modalContent { background: linear-gradient(145deg, #667eea, #764ba2); padding: clamp(20px, 6vw, 35px); border-radius: 20px; text-align: center; color: white; max-width: min(320px, 85vw); width: 90%; box-shadow: 0 20px 60px rgba(0,0,0,0.5); transform: scale(0.8); transition: transform 0.3s; }
.modal.show .modalContent { transform: scale(1); }
.modalTitle { font-size: clamp(20px, 5.5vw, 26px); margin-bottom: 12px; text-shadow: 2px 2px 4px rgba(0,0,0,0.3); }
.modalText { font-size: clamp(13px, 3.5vw, 15px); margin-bottom: 22px; opacity: 0.9; }
.modalBtn { padding: clamp(10px, 3.5vw, 14px) clamp(25px, 7vw, 35px); font-size: clamp(15px, 4vw, 17px); border: none; border-radius: 30px; background: linear-gradient(145deg, #FFD700, #FFA500); color: white; cursor: pointer; font-weight: bold; box-shadow: 0 4px 15px rgba(255, 165, 0, 0.4); transition: all 0.2s; }
.modalBtn:hover { transform: scale(1.05); box-shadow: 0 6px 20px rgba(255, 165, 0, 0.6); }
#startScreen { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); display: flex; flex-direction: column; align-items: center; justify-content: center; z-index: 2000; padding: 20px; }
#gameTitle { font-size: clamp(28px, 9vw, 44px); color: white; text-shadow: 3px 3px 6px rgba(0,0,0,0.3); margin-bottom: 12px; text-align: center; }
#gameSubtitle { font-size: clamp(13px, 3.5vw, 16px); color: rgba(255,255,255,0.8); margin-bottom: 35px; text-align: center; }
.demoBall { width: clamp(50px, 15vw, 70px); height: clamp(50px, 15vw, 70px); border-radius: 50%; margin: clamp(4px, 1.5vw, 8px); display: inline-block; animation: demoBounce 1s ease-in-out infinite; box-shadow: inset -3px -3px 8px rgba(255,255,255,0.9), inset 3px 3px 8px rgba(255,255,255,0.5), 0 6px 12px rgba(0,0,0,0.4); }
.demoBall:nth-child(2) { animation-delay: 0.1s; }
.demoBall:nth-child(3) { animation-delay: 0.2s; }
@keyframes demoBounce { 0%, 100% { transform: translateY(0); } 50% { transform: translateY(-12px); } }
#startBtn { padding: clamp(12px, 4vw, 18px) clamp(35px, 10vw, 55px); font-size: clamp(16px, 4.5vw, 22px); border: none; border-radius: 50px; background: linear-gradient(145deg, #FFD700, #FFA500); color: white; cursor: pointer; font-weight: bold; box-shadow: 0 6px 20px rgba(255, 165, 0, 0.4); transition: all 0.3s; margin-top: 35px; }
#startBtn:hover { transform: scale(1.1); box-shadow: 0 8px 30px rgba(255, 165, 0, 0.6); }
.particle { position: absolute; width: clamp(5px, 1.5vw, 9px); height: clamp(5px, 1.5vw, 9px); border-radius: 50%; pointer-events: none; animation: particleFade 0.6s ease-out forwards; }
@keyframes particleFade { 0% { transform: translate(0, 0) scale(1); opacity: 1; } 100% { transform: translate(var(--tx), var(--ty)) scale(0); opacity: 0; } }
#comboText { position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%); font-size: clamp(28px, 9vw, 44px); font-weight: bold; color: #FFD700; text-shadow: 3px 3px 6px rgba(0,0,0,0.5); pointer-events: none; opacity: 0; z-index: 500; }
.comboShow { animation: comboAnim 1s ease-out forwards; }
@keyframes comboAnim { 0% { transform: translate(-50%, -50%) scale(0.5); opacity: 0; } 20% { transform: translate(-50%, -50%) scale(1.2); opacity: 1; } 80% { transform: translate(-50%, -50%) scale(1); opacity: 1; } 100% { transform: translate(-50%, -50%) scale(1) translateY(-40px); opacity: 0; } }
#levelProgress { position: absolute; top: 45px; left: 50%; transform: translateX(-50%); color: rgba(255,255,255,0.8); font-size: clamp(11px, 3vw, 13px); background: rgba(0,0,0,0.2); padding: 4px 12px; border-radius: 15px; }
#versionDisplay { position: fixed; bottom: 5px; right: 10px; color: rgba(255,255,255,0.4); font-size: 10px; z-index: 100; }
#soundControls { position: absolute; top: 10px; right: 10px; display: flex; gap: 8px; z-index: 100; }
.soundBtn { width: 36px; height: 36px; border-radius: 50%; border: none; background: rgba(255,255,255,0.2); color: white; font-size: 16px; cursor: pointer; }
</style>
</head>
<body>
<div id="startScreen">
<h1 id="gameTitle">ÁêÉÁêÉÊ∂àÊ∂à‰πê</h1>
<p id="gameSubtitle">ÁÇπÂáªÁêÉÁêÉÔºå‰∏â‰∏™Áõ∏ÂêåÈ¢úËâ≤Âç≥ÂèØÊ∂àÈô§</p>
<div>
<div class="demoBall" style="background: radial-gradient(circle at 30% 30%, #ff0000, #cc0000);"></div>
<div class="demoBall" style="background: radial-gradient(circle at 30% 30%, #0066ff, #0044cc);"></div>
<div class="demoBall" style="background: radial-gradient(circle at 30% 30%, #ffcc00, #ff9900);"></div>
</div>
<button id="startBtn">ÂºÄÂßãÊ∏∏Êàè</button>
</div>

<div id="gameContainer" style="display: none;">
<div id="versionDisplay">v1.4</div>
<div id="soundControls">
<button class="soundBtn" id="clickSoundBtn" title="ÁÇπÂáªÈü≥Êïà">üéµ</button>
<button class="soundBtn" id="cheerSoundBtn" title="ÂñùÂΩ©Èü≥Êïà">üéâ</button>
</div>
<div id="topBar">
<div id="levelInfo">Á¨¨ 1 ÂÖ≥</div>
<div id="scoreInfo">ÂæóÂàÜ: 0</div>
</div>
<div id="levelProgress">ÂÖ≥Âç° 1/15</div>
<div id="gameArea">
<div id="board"></div>
</div>
<div id="toolsArea">
<div class="toolWrapper">
<button class="toolBtn" id="shuffleBtn">üîÑ<span class="toolCount" id="shuffleCount">3</span></button>
<span class="toolLabel">Êâì‰π±</span>
</div>
<div class="toolWrapper">
<button class="toolBtn" id="undoBtn">‚Ü©Ô∏è<span class="toolCount" id="undoCount">3</span></button>
<span class="toolLabel">Êí§ÈîÄ</span>
</div>
<div class="toolWrapper">
<button class="toolBtn" id="hintBtn">üí°<span class="toolCount" id="hintCount">3</span></button>
<span class="toolLabel">ÊèêÁ§∫</span>
</div>
</div>
<div id="slotArea">
<span id="slotLabel">ÊßΩ‰Ωç</span>
<div class="slot" data-index="0"></div>
<div class="slot" data-index="1"></div>
<div class="slot" data-index="2"></div>
<div class="slot" data-index="3"></div>
<div class="slot" data-index="4"></div>
<div class="slot" data-index="5"></div>
<div class="slot" data-index="6"></div>
</div>
</div>

<div id="comboText"></div>

<div id="gameOverModal" class="modal">
<div class="modalContent">
<h2 class="modalTitle">Ê∏∏ÊàèÁªìÊùü</h2>
<p class="modalText">ÊßΩ‰ΩçÂ∑≤Êª°ÔºåÂÜçËØï‰∏ÄÊ¨°ÂêßÔºÅ</p>
<button class="modalBtn" onclick="game.restart()">ÂÜçÁé©‰∏ÄÊ¨°</button>
</div>
</div>

<div id="winModal" class="modal">
<div class="modalContent">
<h2 class="modalTitle" id="winTitle">ÊÅ≠ÂñúÈÄöÂÖ≥ÔºÅ</h2>
<p class="modalText" id="winText">Â§™Ê£í‰∫ÜÔºÅ‰Ω†ÊàêÂäüÊ∂àÈô§‰∫ÜÊâÄÊúâÁêÉÁêÉÔºÅ</p>
<button class="modalBtn" id="nextBtn" onclick="game.nextLevel()">‰∏ã‰∏ÄÂÖ≥</button>
</div>
</div>

<script>
// v1.4 JavaScript code will be added in next part
console.log('v1.4 loading...');
</script>
</body>
</html>